---
title: "Getting Started with R"
author: "Manu Navjeevan"
date: "August 9th, 2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

We have not seen any R code yet so this may seem mysterious. For now, the important thing to understand is that including the above cell creates the exact same output as if we had typed "summary(cars)" into the console ... give it a try! 

The advantage of using RMarkdown over the console is that RMarkdown additionally embeds everything together into a single document as output (html, pdf, or word). This is very convenient for writing reports (or problem sets).

## Including Plots

We can also use RMarkdown to embed plots (generated by R) into our documents.
For example, we may include the following cell into our code:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
Once again the final document includes the R output generated by the instructions in the cell.
If we instead simply typed `plot(pressure)` into the console, we would have obtained the exact same graph. It just would not be embedded in a document like this one.

## Some Basic Commands

We can also run R directly from the RMarkdown document instead of using the console.
To do this, just press the green right arrow in the code box. 
This can be helpful for checking that the code is doing the right thing.
Note that we can still use # to tell R to ignore whatever we write after it.

```{r basic1}
# Use this code box to tell R to compute 4+7
4+7
```

All the standard arithmetic symbols work in R. For example "+" for addition, "-" for subtraction, "*" for multiplication, and "/" for division. 

```{r basic2}
# Use this code box to tell R to compute 4 divided by 3
4/3
```

To compute powers we can use the "^" symbol. 

```{r basic3}
# Use this code box to tell R to compute the square root of 4
2^2

4^(0.5)
```

Finally most basic functions have the names you would expect. For example, to compute logs use `log`, for sine and cosine use `sin` and `cos`, and if you wanted a different way to compute a square root you can use `sqrt`

```{r basic4}
# Use this code box to tell R to compute the sin, log, cos, and square root of 1
sin(1)

log(1)

cos(1)

sqrt(1)
```
Finally, two important commands for our homework will be the "qnorm" and "pnorm" commands. The qnorm command takes in a value, v, between zero and 1 and returns the number c such that P(Z <= c) = v, where Z follows a standard normal distribution. This command is ueful for calculating $z_{1-\alpha/2}$. 

The pnorm command takes in any real number, r, and returns the probability that a standard normally distributed random variables takes on a value less than or equal to r. That is it returns P(Z <= r). This is useful for computing p-values

```{r basic5}
qnorm(0.95)
pnorm(1.24)

# Verify that pnorm and qnorm are working the way we'd expect them to
pnorm(qnorm(0.95))
```

We can store the outputs of these commands as objects so that we can access them later. For example:

```{r basic6}
a = qnorm(0.95)
print(a)

b = pnorm(a)
print(b)
```

To conclude, just a final word on the formatting of these `code boxes`.
You probably noticed that they all start with curly brackets containing the expression "r name". The "name" is whatever name you want to assign to that code box -- they have to be unique throughout the document so do not repeat them.
Also note that in some boxes I used the option `echo=FALSE` while in others I did not.
If you include `echo=FALSE`, then the final document will only print the output but not the R code used to generate it. 
If you do not include `echo=FALSE`, then the final document will include first the R code and then the output it generated

## Packages and Libraries

The version of R that we download from CRAN is called "base-R".
Everything we done have so far in R has been using this basic version of R.
However, one of the great things about R is that there is a massive community of users that continuously create new functions that they share with everyone for free (some charge, but we will not be using those in this class).
These "extra" functions are combined into what is called *packages*.
If we want to be able to access them, we first need to install them in our computer. 
Fortunately, that is very straightforward to do as long as you know the name of the *package*.
All we need to do is run the command `install.packages("package name")` in R. Let's give it a try

```{r basic8}

# Ask R to install the package "PoEdata" -- this is a package with many useful datasets
# Other packages may include functions that are also useful, for example to implement a certain ML algorithm or run a specific test
#install.packages("PoEdata")

```

While we have now installed the PoEdata package, it does not mean it is ready to be used.
We first need to tell R that we want to use the PoEdata package in this particular session. 
This is true every time you start a new project (i.e. script or rmarkdown file).
This is accomplished by using the `library` command.
Let's start by using the `?` command to ask R how to use the `library` function, and then using the `library` function to load the "PoEdata" package.

```{r basic9}

# Ask R how to use the library function
#?library

# Use the library function to load the "PoEdata" package
library(PoEdata)

```

Now that PoEdata is loaded, we can access all the functions or datasets in the package. 
We will not use them now, but hopefully the following points are clear:

* To access certain R functions or datasets we may need to to install a package first.
* Once we install it, we need to tell R we want to use it via the `library` command.

## Other Objects

So far we have used objects to store a single number or a collection of numbers (By the way, some useful language: A row or column of numbers is often called a vector).
However, objects are far more powerful and can in fact store all kinds of things.
We next want to explore some of these uses as well as some common functions.

Remember that we created a list of numbers one through six by using the command `:`. 
Another helpful way to create lists is with the function `c`, which simply concatenates any elements you feed it into a list.
Let's see an example below, and remember that whenever in doubt you can always use the command `?` to learn about how a function works.

```{r basic10}

# Ask R how to create a list of one through six using `:`
1:6

# This time create a list 1 through 6 using "c" and save it into an object "a"
a <- c(1,2,3,4,5,6)

```

Many times, we are interested in storing characters, not numbers.
For example, we may want to store country of citizenship, an address, or martial status.
Fortunately, we can also use objects for this purpose

```{r basic 11}

# Create an object in R that stores the values "single" "married" and divorced
status <- c("single", "married", "divorced")

```

Vectors can be combined into many other objects, such as matrices, arrays, and dataframes. 
These are helpful for coding, but the details are a bit beyond the scope of the class.
We will instead focus on simple data manipulation using dataframes
As an example we will work with the dataframe `cars` which is pre-loaded into R.

```{r basic 12}

# Type `cars` into R to see what data is contained in that list
cars

```

As you can see the `cars` dataframe very much resembles an Excel spreadsheet.
It contains a row with names (speed and dist) at the top and the entries for each variable.
Often, we need to access just one of the variables in a dataset. 
There are multiple ways in which we can proceed.
The first works if the variable has a name.
For example in the `cars` data, the first row tells us the names `dist` and `speed`.
To access one of these variables we can use the command `cars$speed` or `cars$dist`

```{r basic 13}

# Save the speed column in cars into a new variable called speed
speed <- cars$speed

```

An alternative way to access a particular column (or row) is to use brackets. For example to access the first column of `cars` we can write `cars[,1]`, while to access the third row we can type `cars[3,]`.

```{r basic 14}

# Save the speed column in cars into a new variable called speed, but this time use brackets
speed <- cars[,2]

```

We have so far pretty much covered the basics of R. 
Please be sure you are familiar with what we have seen so far, as it will make the code we will see in the next few classes more transparent.
There is much more to learn, but we now have the basics for picking up what we need along the way!


## Summary

Today we covered the **very** basics of R. 
So far, we have only used it as a fancy calculator, but needless to say R is far more powerful. 
We'll start exploring more advanced problems next time.
By then, please make sure you install R on your computer (or are able to access it remotely). 
Also familiarize yourself with the basics of RMarkown, as it will be very helpful in writing problem sets for 103.
